__d(function(e,t,n,o){Object.defineProperty(o,"__esModule",{value:!0});var a=t(47),l=babelHelpers.interopRequireDefault(a),r=t(12),i=t(385),d=babelHelpers.interopRequireDefault(i),s=t(381),u=t(386),c=(babelHelpers.interopRequireDefault(u),t(427)),f=babelHelpers.interopRequireDefault(c),p=t(428),b=babelHelpers.interopRequireDefault(p),g=(t(383),t(429)),m=t(454),h=function(e){function n(e){babelHelpers.classCallCheck(this,n);var t=babelHelpers.possibleConstructorReturn(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t._readOnline=function(){t.props.navigation.navigate("appOnlineReader",{url:t.state.book.urls.read})},t._readLocal=function(){var e=t.state.book;t.props.navigator.push({screen:"app.Reader",title:e.title,passProps:{bookId:e.id},animated:!0})},t._download=function(){if(t.state.downloading)return void("ios"===r.Platform.OS?r.AlertIOS.alert("message",downloading):"android"===r.Platform.OS&&t.props.navigator.showSnackbar({text:"downloading"}));"android"===r.Platform.OS&&t.props.navigator.showSnackbar({text:"Start to download"});var e=t.state.book;t.setState({downloading:!0}),(0,m.downloadAsync)(e).then(function(e){t._isMounted&&t.setState({downloading:!1,downloaded:!0})})},t._renderDownloadButton=function(e,n){return e?l.default.createElement(r.TouchableHighlight,{onPress:t._readLocal},l.default.createElement(r.View,{style:[w.button,{backgroundColor:"#C5CAE9"}]},l.default.createElement(r.Text,{style:w.buttonText},"Read Local"))):n?l.default.createElement(r.View,{style:w.button},l.default.createElement(r.Text,{style:w.buttonText},"Downloading")):l.default.createElement(r.TouchableHighlight,{onPress:t._download},l.default.createElement(r.View,{style:w.button},l.default.createElement(r.Text,{style:w.buttonText},"Download")))},t.state={downloading:!1,downloaded:!1,book:e.navigation.state.params.book},t._isMounted=!1,t}return babelHelpers.inherits(n,e),babelHelpers.createClass(n,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.state.book;if(null===e)return l.default.createElement(r.View,{style:{flex:1,paddingTop:20,justifyContent:"flex-start",alignItems:"center"}},l.default.createElement(r.ActivityIndicator,{size:"large"}));var n=(0,g.checkIsDownloadOrNot)(e.id),o=(0,m.checkIsDownloadingOrNot)(e.id);return l.default.createElement(r.ScrollView,{style:{flex:1},contentContainerStyle:w.contentContainer},l.default.createElement(r.View,{style:{padding:20}},l.default.createElement(r.Text,{style:w.title},e.title),l.default.createElement(r.Text,{style:w.description},"Last updated ",(0,d.default)(e.dates.build).fromNow()," "),l.default.createElement(r.View,{style:w.infoWrapper},l.default.createElement(f.default,{icon:t(467),title:"Star",value:e.counts.stars}),l.default.createElement(f.default,{icon:t(468),title:"Subscribe",value:e.counts.subscriptions})),l.default.createElement(r.View,{style:w.buttons},l.default.createElement(r.TouchableHighlight,{onPress:this._readOnline},l.default.createElement(r.View,{style:w.button},l.default.createElement(r.Text,{style:w.buttonText},"Read Online"))),this._renderDownloadButton(n,o))),l.default.createElement(b.default,{id:e.id}))}}]),n}(l.default.PureComponent);h.navigatorStyle={navBarHideOnScroll:!0,navBarBackgroundColor:"#3F51B5",collapsingToolBarComponent:"app.BookDetail.Cover",navBarTranslucent:!0,showTitleWhenExpended:!1,navBarTextColor:"#fff",navBarTitleTextCentered:!0,statusBarColor:"#3F51B5",navBarButtonColor:"#fff",tabBarHidden:!1,topBarElevationShadowEnabled:!0},o.default=h;var w=r.StyleSheet.create({contentContainer:{flexDirection:"column"},coverWrapper:{width:s.SCREEN_WIDTH,height:(0,s.px2dp)(800),backgroundColor:"#fff",justifyContent:"center",alignItems:"center"},coverImage:{width:(0,s.px2dp)(474),height:(0,s.px2dp)(622),borderWidth:2,borderColor:"#eee",elevation:10},title:{fontSize:(0,s.px2dp)(60),color:"#000"},description:{fontSize:(0,s.px2dp)(40)},infoWrapper:{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",paddingTop:10},label:{height:(0,s.px2dp)(60),borderWidth:1,borderColor:"#e8eaed",flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},buttons:{flexDirection:"row",justifyContent:"flex-start",alignItems:"center"},button:{paddingTop:10,paddingBottom:10,paddingLeft:20,paddingRight:20,height:40,alignItems:"center",backgroundColor:"#f6f7f8",justifyContent:"center",borderRadius:2,borderWidth:1,borderColor:"#e8eaed",marginRight:10,marginTop:10},buttonText:{fontSize:(0,s.px2dp)(40),color:"#000"}})},426);