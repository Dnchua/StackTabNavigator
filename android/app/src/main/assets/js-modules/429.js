__d(function(e,o,t,n){function r(e,o,t,n){v.write(function(){v.create("Download",{bookId:e,title:o,cover:t,size:n,downloadAt:new Date})})}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=10;e+=1;var t=v.objects("Download").sorted("downloadAt",!0).slice((e-1)*o,o);return t}function s(e){var o=v.objects("Download").filtered('bookId = "'+e+'"');return o.length>0}function a(){return v.objects("Download").map(function(e){return e.bookId})}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise(function(o,t){try{var n=i(e);o({list:n})}catch(e){t(e)}})}function l(e){var o=v.objects("Download").filtered('bookId = "'+e+'"');o.length>0&&v.write(function(){v.delete(o[0])}),(0,f.deleteBoookFile)(e)}function c(e,o,t){v.write(function(){v.create("Progress",{bookId:e,src:o,readAt:new Date,position:t},!0)})}function u(e){var o=v.objects("Progress").filtered('bookId = "'+e+'"');return o.length>0?{src:o[0].src,position:o[0].position}:{src:"index.html",position:-100}}Object.defineProperty(n,"__esModule",{value:!0}),n.saveDownloadItem=r,n.getDownloadItems=i,n.checkIsDownloadOrNot=s,n.getAllDownloadIds=a,n.getDownloadItemsAsync=d,n.deleteOneDownloadItem=l,n.saveReadProgress=c,n.getReadProgress=u;var g=o(430),w=babelHelpers.interopRequireDefault(g),f=o(454),b={name:"History",primaryKey:"bookId",properties:{bookId:"string",title:"string",cover:"string",lastReadAt:"date"}},p={name:"Download",primaryKey:"bookId",properties:{bookId:"string",title:"string",cover:"string",size:"int",downloadAt:"date"}},I={name:"Progress",primaryKey:"bookId",properties:{bookId:"string",src:"string",readAt:"date",position:{type:"int",default:0,optional:!0}}},v=new w.default({schema:[b,p,I],schemaVersion:2})},429);