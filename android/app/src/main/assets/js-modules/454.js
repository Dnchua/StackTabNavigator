__d(function(e,n,o,t){function i(e){return new Promise(function(n,o){g.default.exists(e).then(function(o){o?n():g.default.mkdir(e).then(function(){n()})})})}function r(e,n){var o={fromUrl:n.urls.download.epub,toFile:e+"/book.epub",background:!0,progressDivider:10,progress:function(e){console.log(e)}},t=g.default.downloadFile(o);return t.promise.then(function(e){return c(n.id),(0,h.saveDownloadItem)(n.id,n.title,n.cover.small,e.bytesWritten),w.delete(n.id),t}).catch(function(e){console.warn(e.message)})}function u(e){return g.default.DocumentDirectoryPath+"/download/"+e.replace("/","-")}function a(e){var n=u(e.id);return w.add(e.id),i(n).then(function(){return r(n,e)})}function l(e){return w.has(e)}function c(e){var n=u(e),o=n+"/book.epub",t=n+"/content",r=function(){b.unZipFile(o,t).then(function(o){console.log("unzip done",o),g.default.readFile(t+"/toc.ncx").then(function(o){var t=o.indexOf("<navMap>"),i=o.indexOf("</navMap>"),r=o.substr(t,i-t+1),u=p.default.parse(r,{ignoreNonTextNodeAttr:!1,ignoreTextNodeAttr:!1,attrPrefix:"_"}),a=u.navMap.navPoint;g.default.writeFile(n+"/toc.json",JSON.stringify(a),"utf8").then(function(n){console.log(e+" toc FILE WRITTEN!")})})}).catch(function(e){console.warn(e)})};i(t).then(r)}function d(e){var n=u(e);g.default.unlink(n).then(function(){console.log(e+" FILE DELETED")}).catch(function(e){console.log(e.message)})}Object.defineProperty(t,"__esModule",{value:!0}),t.getDirFromBookId=u,t.downloadAsync=a,t.checkIsDownloadingOrNot=l,t.deleteBoookFile=d;var f=n(12),s=n(455),p=babelHelpers.interopRequireDefault(s),v=n(464),g=babelHelpers.interopRequireDefault(v),h=n(429),b=f.NativeModules.MyNativeModule,w=new Set},454);